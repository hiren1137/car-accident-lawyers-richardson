---
import { SITE_URL } from "../utils/seo";

export interface BreadcrumbItem {
    label: string;
    href: string;
}

export interface Props {
    items: BreadcrumbItem[];
}

const { items } = Astro.props;

// Generate BreadcrumbList schema
const breadcrumbSchema = {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    itemListElement: items.map((item, index) => ({
        "@type": "ListItem",
        position: index + 1,
        name: item.label,
        item: `${SITE_URL}${item.href}`,
    })),
};
---

<nav aria-label="Breadcrumb" class="mb-6">
    <ol class="flex flex-wrap items-center gap-2 text-sm text-gray-600">
        {
            items.map((item, index) => (
                <li class="flex items-center">
                    {index > 0 && (
                        <svg
                            class="w-4 h-4 mx-2 text-gray-400"
                            fill="currentColor"
                            viewBox="0 0 20 20"
                        >
                            <path
                                fill-rule="evenodd"
                                d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                                clip-rule="evenodd"
                            />
                        </svg>
                    )}
                    {index === items.length - 1 ? (
                        <span class="font-medium text-gray-900">
                            {item.label}
                        </span>
                    ) : (
                        <a
                            href={item.href}
                            class="hover:text-primary-600 transition-colors"
                        >
                            {item.label}
                        </a>
                    )}
                </li>
            ))
        }
    </ol>
</nav>

<script
    type="application/ld+json"
    set:html={JSON.stringify(breadcrumbSchema)}
/>
